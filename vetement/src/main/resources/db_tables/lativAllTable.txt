drop table rating
drop table news
drop table comment
drop table customer_service
drop table favorite
drop table orderItem
drop table orders
drop table production
drop table category
drop table discount 
drop table customer


create table customer(
	customerId int identity(1,1) not null,
	name nvarchar(50),
	gender nvarchar(10),
	mail nvarchar(60),
	pswd nvarchar(30),
	addr_customer nvarchar(80),
	tel nvarchar(20),
	constraint customer_PK primary key(customerId)
)

create table discount(
	packageNo int  identity,
	discount1 float ,    --percentage
	discount2 float ,    --fixed price
	quantity_condition int,
	descript nvarchar(20),
	constraint discount_PK primary key(packageNo),
)

create table category(
	categoryId int identity(1,1),
	class_top nvarchar(30),
	class_middle nvarchar(30),
	class_bottom nvarchar(30),
	constraint category_PK primary key(categoryId)
)

create table production(
	productId int IDENTITY (1,1) not null ,
	productName nvarchar(50) ,
	size nvarchar(15) ,
	color nvarchar(20) ,
	price float ,
	quantity_in_stock int ,
	for_sale bit ,
	describe nvarchar(40),
	packageNo int default 1 not null,
	categoryId int not null,
	icon  varbinary(max),
	picture_main varbinary(max),
	picture_color varbinary(max),
	picture_model1 varbinary(max),
	picture_model2 varbinary(max),
	picture_model3 varbinary(max),
	picture_model4 varbinary(max),
	constraint production_PK primary key(productId),
	constraint production_FK1 foreign key(packageNo) references discount(packageNo),
	constraint production_FK2 foreign key(categoryId) references category(categoryId)
)

create table orders(
	orderNo int IDENTITY (1,1) not null ,
    dealDate date ,
    customerId int not null,
    addr_send nvarchar(80) ,
    tel_send nvarchar(20),
    name_send nvarchar(50),
    price_total float ,
    status1 bit not null, 
	constraint orders_PK primary key(orderNo),
	constraint orders_FK2 foreign key(customerId) references customer(customerId)
)

create table orderItem(
	seqNo int identity(1,1)not null,
	price_origin float,
	price_discount float,
	quantity_order int,
	price_item float,
	orderNo int not null,
	productId int not null,
	constraint orderItem_PK primary key(seqNo),
	constraint orderItem_FK1 foreign key(orderNo) references orders(orderNo),
	constraint orderItem_FK2 foreign key(productId) references production(productId)
)


create table favorite(
	customerId int not null, 
	productId int not null,
	constraint favorite_FK1 foreign key(customerId) references customer(customerId),
	constraint favorite_FK2 foreign key(productId) references production(productId)
)

create table customer_service(
	title_service nvarchar(100),
	content_service nvarchar(2000),
	receive_date date,
	customerId int,
	constraint customer_service_FK1 foreign key(customerId) references customer(customerId),
)

create table comment(
	commentNo int identity(1,1),
	comment nvarchar(200),
	pubtime datetime,
	customerId int not null, 
	productId int not null,
	orderNo int not null,
	constraint comment_PK primary key(commentNo),
	constraint comment_FK1 foreign key(customerId) references customer(customerId),
	constraint comment_FK2 foreign key(productId) references production(productId),
	constraint comment_FK3 foreign key(orderNo) references orders(orderNo)
)

create table news(
	newsno int identity(1,1),
	title nvarchar(40),
	content nvarchar(2000),
	pubdate date,
	constraint news_PK1 primary key(newsno)
)

insert into discount values (1,null,null,'無打折');
insert into discount values (null,500,3,'買三件500');
insert into discount values (0.6,null,2,'買兩件打6折');

insert into category values('男','上身類','短袖背心');
insert into category values('男','外套類','休閒外套');
insert into category values('男','褲裝','牛仔褲');
insert into category values('男','家居服配件','家居服');
insert into category values('男','針織衫','針織衫毛衣');
insert into category values('女','上身類','短袖印花T恤');
insert into category values('女','襯衫類','休閒襯衫');
insert into category values('女','針織衫','美麗諾羊毛');
insert into category values('女','外套類','羽絨系列');
insert into category values('女','褲裝裙裝','裙裝洋裝');
insert into category values('兒童','上身類','長袖');
insert into category values('兒童','襯衫類','法蘭絨襯衫');
insert into category values('兒童','褲裝裙裝','短褲七分褲');
insert into category values('兒童','內著類','HEATUP_保暖衣');
insert into category values('兒童','外套類','保暖FLEECE系列');
insert into category values('兒童','上身類','短袖');
insert into category values('兒童','襯衫類','休閒襯衫');
insert into category values('兒童','上身類','家居服');
insert into category values('兒童','外套類','休閒外套');
insert into category values('兒童','外套類','風衣');
insert into category values('兒童','褲裝裙裝','束口褲');
insert into category values('兒童','褲裝裙裝','洋裝');
insert into category values('兒童','內著類','襪子');
insert into category values('兒童','內著類','內搭褲');
insert into category values('兒童','上身類','POLO衫');
insert into category values('男','上身類','POLO衫');
insert into category values('男','上身類','家居服');
insert into category values('男','外套類','西裝外套');
insert into category values('男','外套類','風衣');
insert into category values('男','褲裝','束口褲');
insert into category values('男','褲裝','長褲');
insert into category values('男','襯衫類','休閒襯衫');
insert into category values('男','襯衫類','商務襯衫');
insert into category values('男','襯衫類','法蘭絨襯衫');
insert into category values('男','內著類','襪子');
insert into category values('女','上身類','POLO衫');
insert into category values('女','上身類','家居服');
insert into category values('女','襯衫類','商務襯衫');
insert into category values('女','襯衫類','法蘭絨襯衫');
insert into category values('女','外套類','休閒外套');
insert into category values('女','外套類','風衣');
insert into category values('女','褲裝裙裝','牛仔褲');
insert into category values('女','褲裝裙裝','束口褲');
insert into category values('女','內著類','清涼系列');
insert into category values('女','內著類','襪子');



insert into customer values('陳小花','女','huahua@gmail.com','lativ123','106台北市大安區復興南路一段386號','0910123567');
insert into customer values('黃琪琪','女','chichi123@gmail.com','lalala','231新北市新店區民權路108號','0912687987');
insert into customer values('李阿男','男','south88@gmail.com','cloth12345','新北市板橋區府中路39號','0910888999');
insert into customer values('許娜娜','女','na_na0505@gmail.com','lativ123','台北市大安區信義路3段100號','0918555666');
insert into customer values('張格魯','男','kevin8081@gmail.com','sa123456','新北市蘆洲區三民路116號','0988588668');

insert into orders values ('2107-04-03',1,'somewhere','123456','someone',600.1,1)
insert into orders values ('2107-04-03',2,'somewhere','139754','someoneElse',500.1,1)
insert into orders values (null,1,null,null,null,null,0)

insert into orderItem values(null,null,3,null,3,1)   
insert into orderItem values(null,null,2,null,3,2) 

create table rating (
 productId int foreign key references production(productId) not null unique,
 score float,
 times int
 )

 insert into rating values (1,5,1);
 insert into rating values (11,4,1);
  insert into rating values (20,3,1);
  insert into rating values (29,5,1);
 insert into rating values (38,4,1);
  insert into rating values (47,3,1);
  insert into rating values (50,5,1);
 insert into rating values (56,4,1);
  insert into rating values (65,3,1);
  insert into rating values (74,5,1);
 insert into rating values (83,4,1);
  insert into rating values (92,3,1);
    insert into rating values (98,5,1);
 insert into rating values (107,4,1);
  insert into rating values (116,3,1);
  
